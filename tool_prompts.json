{
  "_global_guidance": {
    "description": "Global guidance for all Rundeck MCP tools",
    "prompt": "IMPORTANT: If a tool encounters errors (node not found, project not found, job not found, connection issues, etc.), it's okay to stop and report the error clearly. Do not attempt workarounds or continue with partial information. Fail fast and fail clearly. When nodes are not found or unavailable, stop execution immediately and inform the user."
  },
  "list_servers": {
    "description": "List all configured Rundeck servers",
    "prompt": "Shows all configured Rundeck servers with their URLs and API versions.display as a table. Use this to see which servers are available before specifying a server in other tools."
  },
  "get_projects": {
    "description": "Get all Rundeck projects available in your instance",
    "prompt": "This tool retrieves all projects from your Rundeck server. Use this to discover available projects before working with jobs or executions. Optionally specify a server name to target a specific Rundeck instance."
  },
  "create_project": {
    "description": "Create a new Rundeck project",
    "prompt": "Create a new project in Rundeck with optional configuration. Projects organize jobs, executions, and resources. Automatically sets up default node resources configuration. Provide project name (required), description (optional), and custom configuration properties (optional). Use descriptive names and always specify the target server."
  },
  "get_jobs": {
    "description": "Get jobs from a Rundeck project with optional filtering",
    "prompt": "Retrieve jobs from a specific project with human-readable formatting. Jobs are organized by group with status indicators (‚úÖ enabled, ‚ùå disabled, ‚è∞ scheduled, üîß manual). Perfect for browsing available jobs."
  },
  "get_job_definition": {
    "description": "Get detailed job definition including options, workflow, and metadata",
    "prompt": "Get comprehensive details about a specific job including its workflow steps, input options, scheduling configuration, and execution settings. Essential for understanding job requirements before execution.if asked to describe the job in detail, also create a flowchart avoiding special characters"
  },
  "run_job": {
    "description": "Execute a Rundeck job with optional parameters",
    "prompt": "Execute a job immediately with optional parameters and node filters. Returns execution ID for monitoring. Use get_job_definition first to understand required options."
  },
  "create_job": {
    "description": "Create a new Rundeck job in a project with enhanced features",
    "prompt": "Create a new job with intelligent automation features. Follow these rules: 1) AUTOMATICALLY generate 16-digit alphanumeric UUID for job identification, 2) AUTOMATICALLY break jobs into logical script steps, 3) Document the job description in markdown format with prerequisites section, 4) Extract variables from scripts ($VAR, ${VAR}, VAR=) and create job options with type inference (secure for passwords, select for environments/regions), 5) VARIABLE SUBSTITUTION RULES: ALWAYS use @option.VARIABLENAME@ format for any script type (single @, NOT double @@), 6) If no target machines specified, set job to run locally, 7) Script language: if not specified, attempt bash first, then python, powershell also acceptable, 8) Secure password options MUST have default values - use placeholder defaults like 'changeme' or 'password123'. Always show summary of extracted variables, generated steps, and markdown documentation before creation.\n\n## CORRECT RUNDECK WORKFLOW STEP STRUCTURE\n\nAll steps go in the `sequence.commands` array. Each step type has a specific format:\n\n### 1. COMMAND STEPS (exec)\nSimple command execution - use `exec` field:\n```yaml\nsequence:\n  commands:\n  - description: This is a command step\n    exec: echo \"Hello World\"\n  - description: PowerShell command\n    exec: Get-Process | Where-Object {$_.CPU -gt 10}\n  - description: List files\n    exec: ls -la /var/log\n```\n\n### 2. SCRIPT STEPS (script)\nInline scripts - use `script` field with optional interpreter:\n```yaml\nsequence:\n  commands:\n  - description: This is a bash script step\n    script: |\n      #!/bin/bash\n      echo \"Starting deployment\"\n      ENV=@option.environment@\n      cd /opt/app && ./deploy.sh $ENV\n  - description: PowerShell script step\n    script: |\n      $ServiceName = '@option.serviceName@'\n      Get-Service -Name $ServiceName | Restart-Service\n    scriptInterpreter: powershell.exe -ExecutionPolicy Bypass\n  - description: Python script step\n    script: |\n      #!/usr/bin/env python3\n      import os\n      print(f\"Deploying to {@option.environment@}\")\n```\n\n### 3. SQL RUNNER STEPS (Plugin)\nDatabase operations - use `type: org.rundeck.sqlrunner.SQLRunnerNodeStepPlugin`:\n```yaml\nsequence:\n  commands:\n  - description: This is a SQL step\n    nodeStep: true\n    type: org.rundeck.sqlrunner.SQLRunnerNodeStepPlugin\n    configuration:\n      jdbcDriver: com.mysql.jdbc.Driver\n      jdbcUrl: jdbc:mysql://localhost:3306/@option.database@\n      user: @option.dbUser@\n      passwordStoragePath: keys/db/password\n      scriptBody: |\n        SELECT * FROM users WHERE created_date > NOW() - INTERVAL 1 DAY;\n        UPDATE metrics SET last_run = NOW() WHERE job_name = '@option.jobName@';\n      statementDelimiter: /\n      format: text\n      commit: 'false'\n```\n\n### 4. ANSIBLE PLAYBOOK STEPS (Plugin)\nAnsible automation - use `type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep`:\n```yaml\nsequence:\n  commands:\n  - description: This is an Ansible playbook step\n    nodeStep: true\n    type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep\n    configuration:\n      ansible-playbook: |\n        ---\n        - hosts: all\n          become: yes\n          tasks:\n            - name: Install nginx\n              apt:\n                name: nginx\n                state: present\n            - name: Start nginx\n              service:\n                name: nginx\n                state: started\n      ansible-become: 'true'\n      ansible-encrypt-extra-vars: 'false'\n      ansible-ssh-use-agent: 'false'\n```\n\n**Windows Ansible example:**\n```yaml\n  - description: Windows IIS installation\n    nodeStep: true\n    type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep\n    configuration:\n      ansible-playbook: |\n        ---\n        - hosts: windows\n          tasks:\n            - name: Install IIS\n              win_feature:\n                name: Web-Server\n                state: present\n      ansible-become: 'false'\n```\n\n### 5. JOB REFERENCE STEPS (jobref)\nChain other jobs - use `jobref` field:\n```yaml\nsequence:\n  commands:\n  - description: Chain another job\n    jobref:\n      name: Boot in Sequence\n      group: maintenance\n      project: @option.project@\n      uuid: 966248cc-3f9d-4289-97dc-09bfa9a2a346\n      nodeStep: 'true'\n  - description: Call backup job\n    jobref:\n      name: Database Backup\n      group: ''\n      project: Production\n      uuid: abc12345-1234-5678-90ab-cdef12345678\n```\n\n## EXECUTOR SELECTION RULES\n\n1. **Command steps (exec)**: Direct execution, no interpreter needed for simple commands\n2. **Script steps with shebang**: Bash `#!/bin/bash`, Python `#!/usr/bin/env python3`\n3. **PowerShell scripts**: Use `scriptInterpreter: powershell.exe` or `pwsh.exe`\n4. **Windows CMD**: Use `scriptInterpreter: cmd.exe /c`\n5. **SQL steps**: Use `jdbcDriver` in configuration (e.g., `com.mysql.jdbc.Driver`, `org.postgresql.Driver`)\n6. **Ansible steps**: Use plugin configuration with `ansible-become`, `ansible-ssh-*` settings\n7. **Custom interpreters**: Specify in `scriptInterpreter` (e.g., `/usr/bin/ruby`, `C:\\\\Python39\\\\python.exe`)\n\n## CRITICAL: Node Filter Configuration\n\nALWAYS include node filter configuration in the job:\n```yaml\nnodefilters:\n  dispatch:\n    excludePrecedence: true\n    keepgoing: false\n    rankOrder: ascending\n    successOnEmptyNodeFilter: false\n    threadcount: '1'\n  filter: name: localhost\n```\nReplace `filter` value with target node names or patterns like `name: server-1` or `tags: production`."
  },
  "job_import": {
    "description": "Import jobs from YAML or JSON format with intelligent enhancements",
    "prompt": "Consolidated job import tool supporting both YAML and JSON formats. AUTOMATICALLY generates 16-digit alphanumeric UUIDs for all jobs. Specify format parameter as 'yaml' or 'json'. For JSON: converts to YAML, extracts variables, creates job options with type inference, fixes format issues. For YAML: validates structure and generates UUIDs. VARIABLE SUBSTITUTION RULES: ALWAYS use @option.VARIABLENAME@ format for any script type (single @, NOT double @@). Supports single jobs or multiple jobs in one import. Perfect for migrating job collections or importing complex job definitions. Show import summary with validation results.\n\n## CORRECT STEP STRUCTURE IN sequence.commands\n\n**Command steps (exec field):**\n```yaml\nsequence:\n  commands:\n  - exec: echo \"Hello World\"\n    description: Simple command\n  - exec: Get-Service\n    description: PowerShell command\n```\n\n**Script steps (script field):**\n```yaml\nsequence:\n  commands:\n  - script: |\n      #!/bin/bash\n      echo \"Bash script\"\n    description: Bash script step\n  - script: |\n      Write-Host \"PowerShell script\"\n    scriptInterpreter: powershell.exe\n    description: PowerShell script step\n```\n\n**SQL Runner steps (plugin with type):**\n```yaml\nsequence:\n  commands:\n  - description: SQL query step\n    nodeStep: true\n    type: org.rundeck.sqlrunner.SQLRunnerNodeStepPlugin\n    configuration:\n      jdbcDriver: org.postgresql.Driver\n      jdbcUrl: jdbc:postgresql://localhost/mydb\n      user: @option.dbUser@\n      passwordStoragePath: keys/db/password\n      scriptBody: SELECT * FROM status;\n      statementDelimiter: /\n      format: text\n      commit: 'false'\n```\n\n**Ansible Playbook steps (plugin):**\n```yaml\nsequence:\n  commands:\n  - description: Ansible automation step\n    nodeStep: true\n    type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep\n    configuration:\n      ansible-playbook: |\n        ---\n        - hosts: all\n          tasks:\n            - name: Run command\n              command: uptime\n      ansible-become: 'false'\n      ansible-encrypt-extra-vars: 'false'\n```\n\n**Job reference steps (jobref field):**\n```yaml\nsequence:\n  commands:\n  - description: Chain another job\n    jobref:\n      name: Backup Job\n      group: maintenance\n      project: Production\n      uuid: abc12345-1234-5678-90ab-cdef12345678\n      nodeStep: 'true'\n```\n\n**Validation rules:**\n1. All steps MUST be in `sequence.commands` array\n2. Command steps: Use `exec` field only\n3. Script steps: Use `script` field, optional `scriptInterpreter`\n4. SQL steps: Use `type: org.rundeck.sqlrunner.SQLRunnerNodeStepPlugin` with `scriptBody` in configuration\n5. Ansible steps: Use `type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep` with `ansible-playbook` in configuration\n6. Job references: Use `jobref` field with `name`, `group`, `project`, `uuid`\n7. Variable substitution: Always use @option.VAR@ format (NOT ${VAR} or $VAR)"
  },
  "modify_job": {
    "description": "Modify an existing Rundeck job by deleting and recreating with same UUID",
    "prompt": "ALWAYS show amber square emoji and Impact assessment: MEDIUM RISK - JOB MODIFICATION at the beginning. Modify an existing job by following the required pattern: delete job, modify, and replace with the same UUID. The job will be temporarily unavailable during this process. VARIABLE SUBSTITUTION RULES: ALWAYS use @option.VARIABLENAME@ format for any script type (single @, NOT double @@). Preserves the original UUID and allows modification of any job property including name, command, description, options, schedule, and configuration. Uses intelligent automation features with variable extraction and markdown documentation. Requires explicit confirmation with confirmed=True parameter for safety. Show modification summary before execution.\n\n## MODIFYING WORKFLOW STEPS IN sequence.commands\n\n**Converting command step to script step:**\n```yaml\n# Before\nsequence:\n  commands:\n  - exec: ls -la\n    description: List files\n\n# After\nsequence:\n  commands:\n  - script: |\n      #!/bin/bash\n      if [ -d /var/log ]; then\n        ls -la /var/log\n      fi\n    description: List logs with validation\n```\n\n**Changing script interpreter (bash to PowerShell):**\n```yaml\n# Before\nsequence:\n  commands:\n  - script: |\n      #!/bin/bash\n      echo \"Hello\"\n    description: Bash script\n\n# After\nsequence:\n  commands:\n  - script: |\n      Write-Host \"Hello\"\n    scriptInterpreter: powershell.exe\n    description: PowerShell script\n```\n\n**Adding SQL step to workflow:**\n```yaml\nsequence:\n  commands:\n  - exec: echo \"Starting job\"\n    description: Initial step\n  - description: Log to database\n    nodeStep: true\n    type: org.rundeck.sqlrunner.SQLRunnerNodeStepPlugin\n    configuration:\n      jdbcDriver: com.mysql.jdbc.Driver\n      jdbcUrl: jdbc:mysql://localhost:3306/@option.database@\n      user: @option.dbUser@\n      passwordStoragePath: keys/db/password\n      scriptBody: |\n        INSERT INTO job_runs (job_name, run_time) VALUES ('@option.jobName@', NOW());\n      statementDelimiter: /\n      format: text\n      commit: 'true'\n```\n\n**Adding Ansible step:**\n```yaml\nsequence:\n  commands:\n  - description: Configure server with Ansible\n    nodeStep: true\n    type: com.batix.rundeck.plugins.AnsiblePlaybookInlineWorkflowNodeStep\n    configuration:\n      ansible-playbook: |\n        ---\n        - hosts: all\n          tasks:\n            - name: Create marker file\n              file:\n                path: /tmp/job-marker\n                state: touch\n      ansible-become: 'false'\n```\n\n**Adding job reference step:**\n```yaml\nsequence:\n  commands:\n  - description: Run prerequisite job\n    jobref:\n      name: Database Backup\n      group: maintenance\n      project: Production\n      uuid: abc12345-1234-5678-90ab-cdef12345678\n      nodeStep: 'true'\n  - exec: echo \"Backup complete, continuing\"\n    description: Continue after backup\n```\n\n**Adding error handlers:**\n```yaml\nsequence:\n  commands:\n  - script: |\n      #!/bin/bash\n      exit 1\n    description: Step that might fail\n    errorhandler:\n      script: |\n        #!/bin/bash\n        echo \"Handling error, cleaning up\"\n        rm -f /tmp/lockfile\n      description: Cleanup on failure\n```\n\n**Step modification best practices:**\n1. Always preserve `sequence.commands` array structure\n2. Maintain existing step order unless explicitly changing workflow\n3. When adding new steps, consider placement (pre-checks, main work, post-actions)\n4. Keep consistent variable naming: @option.VAR@ format\n5. Add error handlers for critical steps\n6. Update job description to reflect workflow changes\n7. Test node filters match available nodes"
  },
  "get_execution_status": {
    "description": "Get the status and details of a job execution",
    "prompt": "Check the current status of a running or completed job execution. Shows execution state, timing, user, and node results. Use the execution ID returned from run_job."
  },
  "get_execution_output": {
    "description": "Get the output logs of a job execution",
    "prompt": "Retrieve the complete output logs from a job execution. Useful for debugging failed jobs or reviewing execution details."
  },
  "get_executions": {
    "description": "Get executions for a project with filtering options and pagination",
    "prompt": "Query execution history with human-readable formatting showing status icons (‚úÖ succeeded, ‚ùå failed, üîÑ running). Supports pagination and filtering. Returns formatted summaries by default - perfect for browsing recent activity."
  },
  "get_all_executions": {
    "description": "Get all executions with automatic pagination (up to specified limit)",
    "prompt": "Retrieve large datasets with automatic pagination and status summaries. Shows overview statistics and recent executions in human-readable format. Ideal for comprehensive project analysis and reporting."
  },
  "get_execution_metrics": {
    "description": "Get comprehensive execution metrics and analytics for a project",
    "prompt": "Generate detailed analytics including success rates, duration statistics, job frequency analysis, and performance trends over a specified time period. Perfect for project health assessment."
  },
  "get_system_info": {
    "description": "Get Rundeck system information and health metrics",
    "prompt": "Retrieve system-level information about your Rundeck instance including version, health status, and configuration details."
  },
  "get_project_stats": {
    "description": "Get comprehensive statistics for a project including jobs and execution metrics",
    "prompt": "Generate a complete project overview including job counts (total, enabled, scheduled), recent execution metrics, and project configuration. Ideal for project health dashboards."
  },
  "calculate_job_roi": {
    "description": "Calculate ROI metrics for a specific job including cost analysis and value estimation",
    "prompt": "Perform comprehensive ROI analysis for automation jobs including execution costs, estimated manual work savings, and ROI percentage. Helps justify automation investments and identify optimization opportunities."
  },
  "get_bulk_execution_status": {
    "description": "Get status for multiple executions efficiently",
    "prompt": "Check status for multiple executions in a single operation. More efficient than individual status checks when monitoring multiple jobs."
  },
  "run_job_with_monitoring": {
    "description": "Execute a job with optional monitoring until completion",
    "prompt": "Estimate the impact of the job from a risk or cost perspective, and if a risk, ask for confirmation, explaining why, ALWAYS show red amber or green square emoji and Impact assesment: at the beginning.Execute a job and wait for completion showing the output in a code box.if the job definition has options display them once as a numbered list in a table with a arrow emoji depicting if required, or optional, with the default value in brackets, Make sure required options are requested from the user before execution.Stop the job to allow the user to enter values in the form number/value.if only predefined values are available, only let these be selected before running.Do NOT run without confirmation of options or defaults. always show output. Includes timeout protection and returns final execution status. Ideal for automated workflows requiring completion confirmation."
  },
  "get_nodes": {
    "description": "Get nodes for a Rundeck project with optional filtering",
    "prompt": "Retrieve and display all nodes (servers/hosts) in a Rundeck project with human-readable formatting. Shows node names, hostnames, operating systems, and tags. Supports filtering by node attributes or tags to find specific nodes. Perfect for infrastructure discovery and node inventory management."
  },
  "get_node_details": {
    "description": "Get detailed information about a specific node",
    "prompt": "Get comprehensive details about a specific node including hostname, operating system details, architecture, version, description, tags, and all custom attributes. Essential for understanding node configuration and capabilities before job execution."
  },
  "get_node_summary": {
    "description": "Get a summary of nodes in the project including counts and statistics",
    "prompt": "Generate a comprehensive overview of all nodes in a project including total counts, operating system distribution, status breakdown, most common tags, and infrastructure statistics. Ideal for infrastructure health assessment and capacity planning."
  },
  "suggest_node_filters": {
    "description": "Suggest node filter patterns for targeting specific nodes",
    "prompt": "ESSENTIAL for Windows node troubleshooting. When adhoc commands fail with 'No nodes matched', use this tool to find the correct filter syntax. Provide a search term (like 'Server-1' or 'windows') to get specific suggestions for that node. Returns exact filter patterns, regex options, and troubleshooting guidance for targeting Windows and other remote nodes."
  },
  "abort_execution": {
    "description": "Abort a running execution",
    "prompt": "ALWAYS show red square emoji and Impact assessment: HIGH RISK at the beginning. Emergency stop for running job executions. Use when jobs are consuming excessive resources, running longer than expected, or need immediate termination. Requires confirmation before proceeding. Shows abort status and provides execution details."
  },
  "retry_execution": {
    "description": "Retry a failed execution",
    "prompt": "Re-execute a failed job with optional parameter overrides. Useful for transient failures, network issues, or when conditions have been corrected. Can modify job options and node filters for the retry. Returns new execution ID for monitoring. Show green square emoji and Impact assessment: LOW RISK."
  },
  "delete_execution": {
    "description": "Delete an execution from the system",
    "prompt": "ALWAYS show amber square emoji and Impact assessment: MEDIUM RISK - DATA LOSS at the beginning. Permanently remove execution records from Rundeck. Use for cleanup, compliance, or removing sensitive execution data. Cannot be undone. Requires confirmation. Ideal for housekeeping and storage management."
  },
  "job_control": {
    "description": "Control job execution and scheduling state",
    "prompt": "üü° MEDIUM RISK: Consolidated job control operations. Specify operation parameter: 'enable' (activate job execution and scheduling - GREEN SQUARE, LOW RISK), 'disable' (completely disable job - AMBER SQUARE, MEDIUM RISK - SERVICE IMPACT), 'enable_schedule' (enable only scheduling - GREEN SQUARE, LOW RISK), 'disable_schedule' (disable only scheduling, manual execution still works - AMBER SQUARE, LOW-MEDIUM RISK - AUTOMATION IMPACT). Use for maintenance windows, bringing jobs online/offline, or controlling automation vs manual execution. Always show appropriate risk level emoji and impact assessment based on operation type."
  },
  "delete_job": {
    "description": "üî¥ PERMANENTLY DELETE a job (DESTRUCTIVE - requires confirmation)",
    "prompt": "üö® CRITICAL SAFETY PROTOCOL üö® ALWAYS show red square emoji and Impact assessment: HIGH RISK - PERMANENT DATA LOSS at the beginning. This tool PERMANENTLY and IRREVERSIBLY deletes a job from Rundeck. The operation cannot be undone and will destroy all job configuration, execution history, and schedules. MANDATORY two-step process: 1) First call WITHOUT confirmed=True to show deletion preview and get explicit user consent, 2) Second call WITH confirmed=True to execute deletion. Always display detailed job information and require explicit user confirmation before proceeding. Use extreme caution - this is a destructive operation."
  },
  "get_execution_mode": {
    "description": "Get current system execution mode",
    "prompt": "Check the global execution mode of the Rundeck system. Shows whether the system is in ACTIVE mode (normal operations) or PASSIVE mode (executions disabled). Essential for understanding system state during maintenance or troubleshooting."
  },
  "set_execution_mode": {
    "description": "Set system execution mode (active or passive)",
    "prompt": "ALWAYS show red square emoji and Impact assessment: HIGH RISK - SYSTEM-WIDE IMPACT at the beginning. Change global system execution mode. ACTIVE enables all job executions, PASSIVE disables all job executions system-wide. Critical for maintenance windows and emergency situations. Requires explicit confirmation. Affects all projects and jobs."
  },
  "analyze_job": {
    "description": "Comprehensive job analysis including purpose, configuration, nodes, and risk assessment",
    "prompt": "Perform deep analysis of a Rundeck job including complete job definition download, purpose inference, node targeting analysis, workflow step breakdown, option requirements, schedule configuration, and comprehensive risk assessment. Shows impact level with colored emoji indicators. Essential for understanding job behavior before execution, security review, and operational planning. Provides both human-readable summary and complete raw JSON data."
  },
  "visualize_job": {
    "description": "Generate a visual flowchart representation of a Rundeck job",
    "prompt": "Create a modern, interactive flowchart visualization of a Rundeck job using Mermaid diagram syntax. Shows the complete execution flow including job configuration, node filters, options, workflow steps, and error handlers. The generated Mermaid code can be rendered in various tools like Mermaid Live Editor, GitHub markdown, VS Code, Confluence, and Jira. Includes color-coded nodes for different step types, emoji indicators for visual clarity, and a comprehensive legend. Perfect for documentation, training, troubleshooting, and understanding complex job workflows at a glance."
  },
  "run_adhoc_command": {
    "description": "Execute ad hoc commands directly on Rundeck nodes",
    "prompt": "ESSENTIAL for Windows node troubleshooting. Execute shell commands directly on nodes without creating permanent job definitions. ALWAYS show amber square emoji and Impact assessment: MEDIUM RISK - DIRECT SYSTEM ACCESS at the beginning. Specify the command to run, target nodes via filter pattern (REQUIRED - no defaults). Examples: 'name: Server-1-infra' for exact node name, 'name: localhost' for local execution, '.*Windows.*' for regex patterns, 'osFamily: windows' for OS filtering. If node filter doesn't match any nodes, STOP IMMEDIATELY and report the error with troubleshooting guidance - do not continue. Use get_nodes or suggest_node_filters tools first to identify correct node names and filter syntax. Returns execution ID and output details. Perfect for Windows diagnostics, quick maintenance tasks, one-off commands, and system troubleshooting. Requires explicit node_filter parameter and confirmation before execution due to direct system access."
  }
}